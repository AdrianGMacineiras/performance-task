spring:
  application:
    name: similar-products-service
  server:
    port: 5000
    compression:
      enabled: true
      mime-types: application/json
      min-response-size: 1024

product-service:
  base-url: http://localhost:3001
  timeout: 8s
  concurrency: 1000
  service:
    similar-products-timeout: 2s
    concurrency-level: 8
  rest-template:
    connect-timeout: 2s
    read-timeout: 6s
    max-connections: 100
    max-connections-per-route: 50
  webclient:
    base-url: http://localhost:3001
    timeout: 8s
    response-timeout: 6s
    connection-timeout: 2s
    read-timeout: 6s
    write-timeout: 6s
    max-connections: 100
    max-idle-time: 20s
    max-life-time: 2m
    pending-acquire-timeout: 3s
    max-in-memory-size: 16MB
    connection-pool-name: custom-pool
  circuit-breaker:
    name: productDetailCB
    failure-rate-threshold: 60
    wait-duration-in-open-state: 10s
    sliding-window-size: 50
    minimum-number-of-calls: 5
    slow-call-rate-threshold: 50
    slow-call-duration-threshold: 3s
  cache:
    maximum-size: 500
    expire-after-write: 15m
    expire-after-access: 5m
    record-stats: true
  external-api:
    url: http://simulado:80

# Resilience4j configuration for circuit breakers
resilience4j:
  circuitbreaker:
    instances:
      "${product-service.circuit-breaker.name}":
        failure-rate-threshold: ${product-service.circuit-breaker.failure-rate-threshold}
        wait-duration-in-open-state: ${product-service.circuit-breaker.wait-duration-in-open-state}
        sliding-window-size: ${product-service.circuit-breaker.sliding-window-size}
        minimum-number-of-calls: ${product-service.circuit-breaker.minimum-number-of-calls}
        slow-call-rate-threshold: ${product-service.circuit-breaker.slow-call-rate-threshold}
        slow-call-duration-threshold: ${product-service.circuit-breaker.slow-call-duration-threshold}



